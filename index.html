<!DOCTYPE HTML>
<html class="ui-mobile-rendering">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>jQuery-mobile dynamic templated page replacement</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
  <style type="text/css">
    .red {
      color:red;
    }
    .genstamp {
      -webkit-transition: color 1s;
      -moz-transition: color 1s;
    }
  </style>  
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
  <script>
  $(document).bind("mobileinit", function(){
    //console.log("jqm mobileinit");
    $.mobile.autoInitializePage=false;    // then later call $.mobile.initializePage();
    //$.mobile.page.prototype.options.backBtnText = "Home";
    //$.mobile.page.prototype.options.addBackBtn=true;
    $.mobile.defaultPageTransition='fade';
  });
  </script>
  <script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
  <script src="app.js"></script>
</head>

<body>
  <script id="pageTemplate" type="text/x-jquery-tmpl">
  <div id="${id}" data-role="page">
    <div data-role="header" data-position="inline">
      <!--<a href="#home" data-direction="reverse" data-iconpos="right" data-icon="home">Home</a>-->
      <h1>${name}</h1>
      <div data-role="navbar">
        <ul>
          <li><a href="#page1" ${activePage(id,'page1')}>One</a></li>
          <li><a href="#page2" ${activePage(id,'page2')}>Two</a></li>
          <li><a href="#page3" ${activePage(id,'page3')}>Three</a></li>
        </ul>
      </div><!-- /navbar -->
    </div>
    <div data-role="content">
      <h2>This is ${name}</h2>
      <p>All the pages were generated by a jQuery Template.</p>
      <p>Navigate between pages with the navbar above.</p>
      <p>Notice the timestamp of the page generation relative to the clock.</p>
      <p>Finally, you can regenerate pages, including the one which is currently active.
      For details see the <em>replacePage</em> methis in the </em>app.js</em> file
      </p>
      <ul data-role="listview" style="max-width:200px" data-inset="true">
        <li>Clock <span class="clock ui-li-count">${generateStamp()}</span></li>
        <li>Generated at <span class="genstamp ui-li-count">${generateStamp()}</span></li>
        <li>Render Counter <span class="ui-li-count">${counter()}</span></li>
      </ul>      
      <a href="" class="generate" data-generate="page2" data-role="button" data-inline="true">Regenerate Page Two</a>      
      <a href="" class="generate" data-generate="all" data-role="button" data-inline="true" data-theme="b">Regenerate All Pages</a>      
      <a href="" class="generate" data-generate="${id}" data-role="button" data-inline="true">Regenerate This Page</a>
    </div>
  </div>
  </script>
</body>
</html>

